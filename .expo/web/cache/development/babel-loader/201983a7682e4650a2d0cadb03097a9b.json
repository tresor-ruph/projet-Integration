{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"E:\\\\3TI\\\\Integration\\\\projet-Integration\\\\App\\\\node_modules\\\\react-native-gifted-chat\\\\lib\\\\MessageText.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ParsedText from 'react-native-parsed-text';\nimport Communications from 'react-native-communications';\nimport { StylePropType } from \"./utils\";\nvar WWW_URL_PATTERN = /^www\\./i;\nvar textStyle = {\n  fontSize: 16,\n  lineHeight: 20,\n  marginTop: 5,\n  marginBottom: 5,\n  marginLeft: 10,\n  marginRight: 10\n};\nvar styles = {\n  left: StyleSheet.create({\n    container: {},\n    text: _objectSpread({\n      color: 'black'\n    }, textStyle),\n    link: {\n      color: 'black',\n      textDecorationLine: 'underline'\n    }\n  }),\n  right: StyleSheet.create({\n    container: {},\n    text: _objectSpread({\n      color: 'white'\n    }, textStyle),\n    link: {\n      color: 'white',\n      textDecorationLine: 'underline'\n    }\n  })\n};\nvar DEFAULT_OPTION_TITLES = ['Call', 'Text', 'Cancel'];\n\nvar MessageText = function (_React$Component) {\n  _inherits(MessageText, _React$Component);\n\n  var _super = _createSuper(MessageText);\n\n  function MessageText() {\n    var _this;\n\n    _classCallCheck(this, MessageText);\n\n    _this = _super.apply(this, arguments);\n\n    _this.onUrlPress = function (url) {\n      if (WWW_URL_PATTERN.test(url)) {\n        _this.onUrlPress(\"http://\" + url);\n      } else {\n        Linking.canOpenURL(url).then(function (supported) {\n          if (!supported) {\n            console.error('No handler for URL:', url);\n          } else {\n            Linking.openURL(url);\n          }\n        });\n      }\n    };\n\n    _this.onPhonePress = function (phone) {\n      var optionTitles = _this.props.optionTitles;\n      var options = optionTitles && optionTitles.length > 0 ? optionTitles.slice(0, 3) : DEFAULT_OPTION_TITLES;\n      var cancelButtonIndex = options.length - 1;\n\n      _this.context.actionSheet().showActionSheetWithOptions({\n        options: options,\n        cancelButtonIndex: cancelButtonIndex\n      }, function (buttonIndex) {\n        switch (buttonIndex) {\n          case 0:\n            Communications.phonecall(phone, true);\n            break;\n\n          case 1:\n            Communications.text(phone);\n            break;\n\n          default:\n            break;\n        }\n      });\n    };\n\n    _this.onEmailPress = function (email) {\n      return Communications.email([email], null, null, null, null);\n    };\n\n    return _this;\n  }\n\n  _createClass(MessageText, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !!this.props.currentMessage && !!nextProps.currentMessage && this.props.currentMessage.text !== nextProps.currentMessage.text;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var linkStyle = [styles[this.props.position].link, this.props.linkStyle && this.props.linkStyle[this.props.position]];\n      return React.createElement(View, {\n        style: [styles[this.props.position].container, this.props.containerStyle && this.props.containerStyle[this.props.position]],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }\n      }, React.createElement(ParsedText, {\n        style: [styles[this.props.position].text, this.props.textStyle && this.props.textStyle[this.props.position], this.props.customTextStyle],\n        parse: [].concat(_toConsumableArray(this.props.parsePatterns(linkStyle)), [{\n          type: 'url',\n          style: linkStyle,\n          onPress: this.onUrlPress\n        }, {\n          type: 'phone',\n          style: linkStyle,\n          onPress: this.onPhonePress\n        }, {\n          type: 'email',\n          style: linkStyle,\n          onPress: this.onEmailPress\n        }]),\n        childrenProps: _objectSpread({}, this.props.textProps),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      }, this.props.currentMessage.text));\n    }\n  }]);\n\n  return MessageText;\n}(React.Component);\n\nexport { MessageText as default };\nMessageText.contextTypes = {\n  actionSheet: PropTypes.func\n};\nMessageText.defaultProps = {\n  position: 'left',\n  optionTitles: DEFAULT_OPTION_TITLES,\n  currentMessage: {\n    text: ''\n  },\n  containerStyle: {},\n  textStyle: {},\n  linkStyle: {},\n  customTextStyle: {},\n  textProps: {},\n  parsePatterns: function parsePatterns() {\n    return [];\n  }\n};\nMessageText.propTypes = {\n  position: PropTypes.oneOf(['left', 'right']),\n  optionTitles: PropTypes.arrayOf(PropTypes.string),\n  currentMessage: PropTypes.object,\n  containerStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  textStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  linkStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  parsePatterns: PropTypes.func,\n  textProps: PropTypes.object,\n  customTextStyle: StylePropType\n};","map":{"version":3,"sources":["../src/MessageText.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { Linking, StyleSheet, View, } from 'react-native';\r\n// @ts-ignore\r\nimport ParsedText from 'react-native-parsed-text';\r\nimport Communications from 'react-native-communications';\r\nimport { StylePropType } from './utils';\r\nconst WWW_URL_PATTERN = /^www\\./i;\r\nconst textStyle = {\r\n    fontSize: 16,\r\n    lineHeight: 20,\r\n    marginTop: 5,\r\n    marginBottom: 5,\r\n    marginLeft: 10,\r\n    marginRight: 10,\r\n};\r\nconst styles = {\r\n    left: StyleSheet.create({\r\n        container: {},\r\n        text: {\r\n            color: 'black',\r\n            ...textStyle,\r\n        },\r\n        link: {\r\n            color: 'black',\r\n            textDecorationLine: 'underline',\r\n        },\r\n    }),\r\n    right: StyleSheet.create({\r\n        container: {},\r\n        text: {\r\n            color: 'white',\r\n            ...textStyle,\r\n        },\r\n        link: {\r\n            color: 'white',\r\n            textDecorationLine: 'underline',\r\n        },\r\n    }),\r\n};\r\nconst DEFAULT_OPTION_TITLES = ['Call', 'Text', 'Cancel'];\r\nexport default class MessageText extends React.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.onUrlPress = (url) => {\r\n            // When someone sends a message that includes a website address beginning with \"www.\" (omitting the scheme),\r\n            // react-native-parsed-text recognizes it as a valid url, but Linking fails to open due to the missing scheme.\r\n            if (WWW_URL_PATTERN.test(url)) {\r\n                this.onUrlPress(`http://${url}`);\r\n            }\r\n            else {\r\n                Linking.canOpenURL(url).then(supported => {\r\n                    if (!supported) {\r\n                        console.error('No handler for URL:', url);\r\n                    }\r\n                    else {\r\n                        Linking.openURL(url);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        this.onPhonePress = (phone) => {\r\n            const { optionTitles } = this.props;\r\n            const options = optionTitles && optionTitles.length > 0\r\n                ? optionTitles.slice(0, 3)\r\n                : DEFAULT_OPTION_TITLES;\r\n            const cancelButtonIndex = options.length - 1;\r\n            this.context.actionSheet().showActionSheetWithOptions({\r\n                options,\r\n                cancelButtonIndex,\r\n            }, (buttonIndex) => {\r\n                switch (buttonIndex) {\r\n                    case 0:\r\n                        Communications.phonecall(phone, true);\r\n                        break;\r\n                    case 1:\r\n                        Communications.text(phone);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        };\r\n        this.onEmailPress = (email) => Communications.email([email], null, null, null, null);\r\n    }\r\n    shouldComponentUpdate(nextProps) {\r\n        return (!!this.props.currentMessage &&\r\n            !!nextProps.currentMessage &&\r\n            this.props.currentMessage.text !== nextProps.currentMessage.text);\r\n    }\r\n    render() {\r\n        const linkStyle = [\r\n            styles[this.props.position].link,\r\n            this.props.linkStyle && this.props.linkStyle[this.props.position],\r\n        ];\r\n        return (<View style={[\r\n            styles[this.props.position].container,\r\n            this.props.containerStyle &&\r\n                this.props.containerStyle[this.props.position],\r\n        ]}>\r\n        <ParsedText style={[\r\n            styles[this.props.position].text,\r\n            this.props.textStyle && this.props.textStyle[this.props.position],\r\n            this.props.customTextStyle,\r\n        ]} parse={[\r\n            ...this.props.parsePatterns(linkStyle),\r\n            { type: 'url', style: linkStyle, onPress: this.onUrlPress },\r\n            { type: 'phone', style: linkStyle, onPress: this.onPhonePress },\r\n            { type: 'email', style: linkStyle, onPress: this.onEmailPress },\r\n        ]} childrenProps={{ ...this.props.textProps }}>\r\n          {this.props.currentMessage.text}\r\n        </ParsedText>\r\n      </View>);\r\n    }\r\n}\r\nMessageText.contextTypes = {\r\n    actionSheet: PropTypes.func,\r\n};\r\nMessageText.defaultProps = {\r\n    position: 'left',\r\n    optionTitles: DEFAULT_OPTION_TITLES,\r\n    currentMessage: {\r\n        text: '',\r\n    },\r\n    containerStyle: {},\r\n    textStyle: {},\r\n    linkStyle: {},\r\n    customTextStyle: {},\r\n    textProps: {},\r\n    parsePatterns: () => [],\r\n};\r\nMessageText.propTypes = {\r\n    position: PropTypes.oneOf(['left', 'right']),\r\n    optionTitles: PropTypes.arrayOf(PropTypes.string),\r\n    currentMessage: PropTypes.object,\r\n    containerStyle: PropTypes.shape({\r\n        left: StylePropType,\r\n        right: StylePropType,\r\n    }),\r\n    textStyle: PropTypes.shape({\r\n        left: StylePropType,\r\n        right: StylePropType,\r\n    }),\r\n    linkStyle: PropTypes.shape({\r\n        left: StylePropType,\r\n        right: StylePropType,\r\n    }),\r\n    parsePatterns: PropTypes.func,\r\n    textProps: PropTypes.object,\r\n    customTextStyle: StylePropType,\r\n};\r\n//# sourceMappingURL=MessageText.js.map"]},"metadata":{},"sourceType":"module"}