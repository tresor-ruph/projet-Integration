{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\3TI\\\\Integration\\\\projet-Integration\\\\App\\\\node_modules\\\\react-native-gifted-chat\\\\lib\\\\MessageContainer.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport LoadEarlier from \"./LoadEarlier\";\nimport Message from \"./Message\";\nimport Color from \"./Color\";\nimport { warning, StylePropType } from \"./utils\";\nimport TypingIndicator from \"./TypingIndicator\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  containerAlignTop: {\n    flexDirection: 'row',\n    alignItems: 'flex-start'\n  },\n  contentContainerStyle: {\n    flexGrow: 1,\n    justifyContent: 'flex-start'\n  },\n  emptyChatContainer: {\n    flex: 1,\n    transform: [{\n      scaleY: -1\n    }]\n  },\n  headerWrapper: {\n    flex: 1\n  },\n  listStyle: {\n    flex: 1\n  },\n  scrollToBottomStyle: {\n    opacity: 0.8,\n    position: 'absolute',\n    right: 10,\n    bottom: 30,\n    zIndex: 999,\n    height: 40,\n    width: 40,\n    borderRadius: 20,\n    backgroundColor: Color.white,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: Color.black,\n    shadowOpacity: 0.5,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    },\n    shadowRadius: 1\n  }\n});\n\nvar MessageContainer = function (_React$PureComponent) {\n  _inherits(MessageContainer, _React$PureComponent);\n\n  var _super = _createSuper(MessageContainer);\n\n  function MessageContainer() {\n    var _this;\n\n    _classCallCheck(this, MessageContainer);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      showScrollBottom: false\n    };\n\n    _this.attachKeyboardListeners = function () {\n      var invertibleProps = _this.props.invertibleScrollViewProps;\n\n      if (invertibleProps) {\n        Keyboard.addListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n        Keyboard.addListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n        Keyboard.addListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n        Keyboard.addListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n      }\n    };\n\n    _this.detachKeyboardListeners = function () {\n      var invertibleProps = _this.props.invertibleScrollViewProps;\n      Keyboard.removeListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n      Keyboard.removeListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n      Keyboard.removeListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n      Keyboard.removeListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n    };\n\n    _this.renderTypingIndicator = function () {\n      if (Platform.OS === 'web') {\n        return null;\n      }\n\n      return React.createElement(TypingIndicator, {\n        isTyping: _this.props.isTyping || false,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 20\n        }\n      });\n    };\n\n    _this.renderFooter = function () {\n      if (_this.props.renderFooter) {\n        return _this.props.renderFooter(_this.props);\n      }\n\n      return _this.renderTypingIndicator();\n    };\n\n    _this.renderLoadEarlier = function () {\n      if (_this.props.loadEarlier === true) {\n        var loadEarlierProps = _objectSpread({}, _this.props);\n\n        if (_this.props.renderLoadEarlier) {\n          return _this.props.renderLoadEarlier(loadEarlierProps);\n        }\n\n        return React.createElement(LoadEarlier, _extends({}, loadEarlierProps, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 24\n          }\n        }));\n      }\n\n      return null;\n    };\n\n    _this.scrollToBottom = function () {\n      var animated = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var inverted = _this.props.inverted;\n\n      if (inverted) {\n        _this.scrollTo({\n          offset: 0,\n          animated: animated\n        });\n      } else if (_this.props.forwardRef && _this.props.forwardRef.current) {\n        _this.props.forwardRef.current.scrollToEnd({\n          animated: animated\n        });\n      }\n    };\n\n    _this.handleOnScroll = function (event) {\n      var _event$nativeEvent = event.nativeEvent,\n          contentOffsetY = _event$nativeEvent.contentOffset.y,\n          contentSizeHeight = _event$nativeEvent.contentSize.height,\n          layoutMeasurementHeight = _event$nativeEvent.layoutMeasurement.height;\n      var scrollToBottomOffset = _this.props.scrollToBottomOffset;\n\n      if (_this.props.inverted) {\n        if (contentOffsetY > scrollToBottomOffset) {\n          _this.setState({\n            showScrollBottom: true\n          });\n        } else {\n          _this.setState({\n            showScrollBottom: false\n          });\n        }\n      } else {\n        if (contentOffsetY < scrollToBottomOffset && contentSizeHeight - layoutMeasurementHeight > scrollToBottomOffset) {\n          _this.setState({\n            showScrollBottom: true\n          });\n        } else {\n          _this.setState({\n            showScrollBottom: false\n          });\n        }\n      }\n    };\n\n    _this.renderRow = function (_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n\n      if (!item._id && item._id !== 0) {\n        warning('GiftedChat: `_id` is missing for message', JSON.stringify(item));\n      }\n\n      if (!item.user) {\n        if (!item.system) {\n          warning('GiftedChat: `user` is missing for message', JSON.stringify(item));\n        }\n\n        item.user = {\n          _id: 0\n        };\n      }\n\n      var _this$props = _this.props,\n          messages = _this$props.messages,\n          user = _this$props.user,\n          inverted = _this$props.inverted,\n          restProps = _objectWithoutProperties(_this$props, [\"messages\", \"user\", \"inverted\"]);\n\n      if (messages && user) {\n        var previousMessage = (inverted ? messages[index + 1] : messages[index - 1]) || {};\n        var nextMessage = (inverted ? messages[index - 1] : messages[index + 1]) || {};\n\n        var messageProps = _objectSpread(_objectSpread({}, restProps), {}, {\n          user: user,\n          key: item._id,\n          currentMessage: item,\n          previousMessage: previousMessage,\n          inverted: inverted,\n          nextMessage: nextMessage,\n          position: item.user._id === user._id ? 'right' : 'left'\n        });\n\n        if (_this.props.renderMessage) {\n          return _this.props.renderMessage(messageProps);\n        }\n\n        return React.createElement(Message, _extends({}, messageProps, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 24\n          }\n        }));\n      }\n\n      return null;\n    };\n\n    _this.renderChatEmpty = function () {\n      if (_this.props.renderChatEmpty) {\n        return _this.props.inverted ? _this.props.renderChatEmpty() : React.createElement(View, {\n          style: styles.emptyChatContainer,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 80\n          }\n        }, _this.props.renderChatEmpty());\n      }\n\n      return React.createElement(View, {\n        style: styles.container,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 20\n        }\n      });\n    };\n\n    _this.renderHeaderWrapper = function () {\n      return React.createElement(View, {\n        style: styles.headerWrapper,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 43\n        }\n      }, _this.renderLoadEarlier());\n    };\n\n    _this.onLayoutList = function () {\n      if (!_this.props.inverted && !!_this.props.messages && _this.props.messages.length) {\n        setTimeout(function () {\n          return _this.scrollToBottom && _this.scrollToBottom(false);\n        }, 15 * _this.props.messages.length);\n      }\n    };\n\n    _this.onEndReached = function (_ref2) {\n      var distanceFromEnd = _ref2.distanceFromEnd;\n      var _this$props2 = _this.props,\n          loadEarlier = _this$props2.loadEarlier,\n          onLoadEarlier = _this$props2.onLoadEarlier,\n          infiniteScroll = _this$props2.infiniteScroll,\n          isLoadingEarlier = _this$props2.isLoadingEarlier;\n\n      if (infiniteScroll && distanceFromEnd > 0 && distanceFromEnd <= 100 && loadEarlier && onLoadEarlier && !isLoadingEarlier && Platform.OS !== 'web') {\n        onLoadEarlier();\n      }\n    };\n\n    _this.keyExtractor = function (item) {\n      return \"\" + item._id;\n    };\n\n    return _this;\n  }\n\n  _createClass(MessageContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.messages && this.props.messages.length === 0) {\n        this.attachKeyboardListeners();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.detachKeyboardListeners();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.messages && prevProps.messages.length === 0 && this.props.messages && this.props.messages.length > 0) {\n        this.detachKeyboardListeners();\n      } else if (prevProps.messages && this.props.messages && prevProps.messages.length > 0 && this.props.messages.length === 0) {\n        this.attachKeyboardListeners();\n      }\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(options) {\n      if (this.props.forwardRef && this.props.forwardRef.current && options) {\n        this.props.forwardRef.current.scrollToOffset(options);\n      }\n    }\n  }, {\n    key: \"renderScrollBottomComponent\",\n    value: function renderScrollBottomComponent() {\n      var scrollToBottomComponent = this.props.scrollToBottomComponent;\n\n      if (scrollToBottomComponent) {\n        return scrollToBottomComponent();\n      }\n\n      return React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 16\n        }\n      }, \"V\");\n    }\n  }, {\n    key: \"renderScrollToBottomWrapper\",\n    value: function renderScrollToBottomWrapper() {\n      var _this2 = this;\n\n      var propsStyle = this.props.scrollToBottomStyle || {};\n      return React.createElement(View, {\n        style: [styles.scrollToBottomStyle, propsStyle],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.scrollToBottom();\n        },\n        hitSlop: {\n          top: 5,\n          left: 5,\n          right: 5,\n          bottom: 5\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }\n      }, this.renderScrollBottomComponent()));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var inverted = this.props.inverted;\n      return React.createElement(View, {\n        style: this.props.alignTop ? styles.containerAlignTop : styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 17\n        }\n      }, this.state.showScrollBottom && this.props.scrollToBottom ? this.renderScrollToBottomWrapper() : null, React.createElement(FlatList, _extends({\n        ref: this.props.forwardRef,\n        extraData: [this.props.extraData, this.props.isTyping],\n        keyExtractor: this.keyExtractor,\n        enableEmptySections: true,\n        automaticallyAdjustContentInsets: false,\n        inverted: inverted,\n        data: this.props.messages,\n        style: styles.listStyle,\n        contentContainerStyle: styles.contentContainerStyle,\n        renderItem: this.renderRow\n      }, this.props.invertibleScrollViewProps, {\n        ListEmptyComponent: this.renderChatEmpty,\n        ListFooterComponent: inverted ? this.renderHeaderWrapper : this.renderFooter,\n        ListHeaderComponent: inverted ? this.renderFooter : this.renderHeaderWrapper,\n        onScroll: this.handleOnScroll,\n        scrollEventThrottle: 100,\n        onLayout: this.onLayoutList,\n        onEndReached: this.onEndReached,\n        onEndReachedThreshold: 0.1\n      }, this.props.listViewProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 9\n        }\n      })));\n    }\n  }]);\n\n  return MessageContainer;\n}(React.PureComponent);\n\nexport { MessageContainer as default };\nMessageContainer.defaultProps = {\n  messages: [],\n  user: {},\n  isTyping: false,\n  renderChatEmpty: null,\n  renderFooter: null,\n  renderMessage: null,\n  onLoadEarlier: function onLoadEarlier() {},\n  onQuickReply: function onQuickReply() {},\n  inverted: true,\n  loadEarlier: false,\n  listViewProps: {},\n  invertibleScrollViewProps: {},\n  extraData: null,\n  scrollToBottom: false,\n  scrollToBottomOffset: 200,\n  alignTop: false,\n  scrollToBottomStyle: {},\n  infiniteScroll: false,\n  isLoadingEarlier: false\n};\nMessageContainer.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.object),\n  isTyping: PropTypes.bool,\n  user: PropTypes.object,\n  renderChatEmpty: PropTypes.func,\n  renderFooter: PropTypes.func,\n  renderMessage: PropTypes.func,\n  renderLoadEarlier: PropTypes.func,\n  onLoadEarlier: PropTypes.func,\n  listViewProps: PropTypes.object,\n  inverted: PropTypes.bool,\n  loadEarlier: PropTypes.bool,\n  invertibleScrollViewProps: PropTypes.object,\n  extraData: PropTypes.array,\n  scrollToBottom: PropTypes.bool,\n  scrollToBottomOffset: PropTypes.number,\n  scrollToBottomComponent: PropTypes.func,\n  alignTop: PropTypes.bool,\n  scrollToBottomStyle: StylePropType,\n  infiniteScroll: PropTypes.bool\n};","map":{"version":3,"sources":["../src/MessageContainer.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { FlatList, View, StyleSheet, Keyboard, TouchableOpacity, Text, Platform, } from 'react-native';\r\nimport LoadEarlier from './LoadEarlier';\r\nimport Message from './Message';\r\nimport Color from './Color';\r\nimport { warning, StylePropType } from './utils';\r\nimport TypingIndicator from './TypingIndicator';\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n    },\r\n    containerAlignTop: {\r\n        flexDirection: 'row',\r\n        alignItems: 'flex-start',\r\n    },\r\n    contentContainerStyle: {\r\n        flexGrow: 1,\r\n        justifyContent: 'flex-start',\r\n    },\r\n    emptyChatContainer: {\r\n        flex: 1,\r\n        transform: [{ scaleY: -1 }],\r\n    },\r\n    headerWrapper: {\r\n        flex: 1,\r\n    },\r\n    listStyle: {\r\n        flex: 1,\r\n    },\r\n    scrollToBottomStyle: {\r\n        opacity: 0.8,\r\n        position: 'absolute',\r\n        right: 10,\r\n        bottom: 30,\r\n        zIndex: 999,\r\n        height: 40,\r\n        width: 40,\r\n        borderRadius: 20,\r\n        backgroundColor: Color.white,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        shadowColor: Color.black,\r\n        shadowOpacity: 0.5,\r\n        shadowOffset: { width: 0, height: 0 },\r\n        shadowRadius: 1,\r\n    },\r\n});\r\nexport default class MessageContainer extends React.PureComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            showScrollBottom: false,\r\n        };\r\n        this.attachKeyboardListeners = () => {\r\n            const { invertibleScrollViewProps: invertibleProps } = this.props;\r\n            if (invertibleProps) {\r\n                Keyboard.addListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\r\n                Keyboard.addListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\r\n                Keyboard.addListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\r\n                Keyboard.addListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\r\n            }\r\n        };\r\n        this.detachKeyboardListeners = () => {\r\n            const { invertibleScrollViewProps: invertibleProps } = this.props;\r\n            Keyboard.removeListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\r\n            Keyboard.removeListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\r\n            Keyboard.removeListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\r\n            Keyboard.removeListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\r\n        };\r\n        this.renderTypingIndicator = () => {\r\n            if (Platform.OS === 'web') {\r\n                return null;\r\n            }\r\n            return <TypingIndicator isTyping={this.props.isTyping || false}/>;\r\n        };\r\n        this.renderFooter = () => {\r\n            if (this.props.renderFooter) {\r\n                return this.props.renderFooter(this.props);\r\n            }\r\n            return this.renderTypingIndicator();\r\n        };\r\n        this.renderLoadEarlier = () => {\r\n            if (this.props.loadEarlier === true) {\r\n                const loadEarlierProps = {\r\n                    ...this.props,\r\n                };\r\n                if (this.props.renderLoadEarlier) {\r\n                    return this.props.renderLoadEarlier(loadEarlierProps);\r\n                }\r\n                return <LoadEarlier {...loadEarlierProps}/>;\r\n            }\r\n            return null;\r\n        };\r\n        this.scrollToBottom = (animated = true) => {\r\n            const { inverted } = this.props;\r\n            if (inverted) {\r\n                this.scrollTo({ offset: 0, animated });\r\n            }\r\n            else if (this.props.forwardRef && this.props.forwardRef.current) {\r\n                this.props.forwardRef.current.scrollToEnd({ animated });\r\n            }\r\n        };\r\n        this.handleOnScroll = (event) => {\r\n            const { nativeEvent: { contentOffset: { y: contentOffsetY }, contentSize: { height: contentSizeHeight }, layoutMeasurement: { height: layoutMeasurementHeight }, }, } = event;\r\n            const { scrollToBottomOffset } = this.props;\r\n            if (this.props.inverted) {\r\n                if (contentOffsetY > scrollToBottomOffset) {\r\n                    this.setState({ showScrollBottom: true });\r\n                }\r\n                else {\r\n                    this.setState({ showScrollBottom: false });\r\n                }\r\n            }\r\n            else {\r\n                if (contentOffsetY < scrollToBottomOffset &&\r\n                    contentSizeHeight - layoutMeasurementHeight > scrollToBottomOffset) {\r\n                    this.setState({ showScrollBottom: true });\r\n                }\r\n                else {\r\n                    this.setState({ showScrollBottom: false });\r\n                }\r\n            }\r\n        };\r\n        this.renderRow = ({ item, index }) => {\r\n            if (!item._id && item._id !== 0) {\r\n                warning('GiftedChat: `_id` is missing for message', JSON.stringify(item));\r\n            }\r\n            if (!item.user) {\r\n                if (!item.system) {\r\n                    warning('GiftedChat: `user` is missing for message', JSON.stringify(item));\r\n                }\r\n                item.user = { _id: 0 };\r\n            }\r\n            const { messages, user, inverted, ...restProps } = this.props;\r\n            if (messages && user) {\r\n                const previousMessage = (inverted ? messages[index + 1] : messages[index - 1]) || {};\r\n                const nextMessage = (inverted ? messages[index - 1] : messages[index + 1]) || {};\r\n                const messageProps = {\r\n                    ...restProps,\r\n                    user,\r\n                    key: item._id,\r\n                    currentMessage: item,\r\n                    previousMessage,\r\n                    inverted,\r\n                    nextMessage,\r\n                    position: item.user._id === user._id ? 'right' : 'left',\r\n                };\r\n                if (this.props.renderMessage) {\r\n                    return this.props.renderMessage(messageProps);\r\n                }\r\n                return <Message {...messageProps}/>;\r\n            }\r\n            return null;\r\n        };\r\n        this.renderChatEmpty = () => {\r\n            if (this.props.renderChatEmpty) {\r\n                return this.props.inverted ? (this.props.renderChatEmpty()) : (<View style={styles.emptyChatContainer}>\r\n          {this.props.renderChatEmpty()}\r\n        </View>);\r\n            }\r\n            return <View style={styles.container}/>;\r\n        };\r\n        this.renderHeaderWrapper = () => (<View style={styles.headerWrapper}>{this.renderLoadEarlier()}</View>);\r\n        this.onLayoutList = () => {\r\n            if (!this.props.inverted &&\r\n                !!this.props.messages &&\r\n                this.props.messages.length) {\r\n                setTimeout(() => this.scrollToBottom && this.scrollToBottom(false), 15 * this.props.messages.length);\r\n            }\r\n        };\r\n        this.onEndReached = ({ distanceFromEnd }) => {\r\n            const { loadEarlier, onLoadEarlier, infiniteScroll, isLoadingEarlier, } = this.props;\r\n            if (infiniteScroll &&\r\n                distanceFromEnd > 0 &&\r\n                distanceFromEnd <= 100 &&\r\n                loadEarlier &&\r\n                onLoadEarlier &&\r\n                !isLoadingEarlier &&\r\n                Platform.OS !== 'web') {\r\n                onLoadEarlier();\r\n            }\r\n        };\r\n        this.keyExtractor = (item) => `${item._id}`;\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.messages && this.props.messages.length === 0) {\r\n            this.attachKeyboardListeners();\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        this.detachKeyboardListeners();\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.messages &&\r\n            prevProps.messages.length === 0 &&\r\n            this.props.messages &&\r\n            this.props.messages.length > 0) {\r\n            this.detachKeyboardListeners();\r\n        }\r\n        else if (prevProps.messages &&\r\n            this.props.messages &&\r\n            prevProps.messages.length > 0 &&\r\n            this.props.messages.length === 0) {\r\n            this.attachKeyboardListeners();\r\n        }\r\n    }\r\n    scrollTo(options) {\r\n        if (this.props.forwardRef && this.props.forwardRef.current && options) {\r\n            this.props.forwardRef.current.scrollToOffset(options);\r\n        }\r\n    }\r\n    renderScrollBottomComponent() {\r\n        const { scrollToBottomComponent } = this.props;\r\n        if (scrollToBottomComponent) {\r\n            return scrollToBottomComponent();\r\n        }\r\n        return <Text>V</Text>;\r\n    }\r\n    renderScrollToBottomWrapper() {\r\n        const propsStyle = this.props.scrollToBottomStyle || {};\r\n        return (<View style={[styles.scrollToBottomStyle, propsStyle]}>\r\n        <TouchableOpacity onPress={() => this.scrollToBottom()} hitSlop={{ top: 5, left: 5, right: 5, bottom: 5 }}>\r\n          {this.renderScrollBottomComponent()}\r\n        </TouchableOpacity>\r\n      </View>);\r\n    }\r\n    render() {\r\n        const { inverted } = this.props;\r\n        return (<View style={this.props.alignTop ? styles.containerAlignTop : styles.container}>\r\n        {this.state.showScrollBottom && this.props.scrollToBottom\r\n            ? this.renderScrollToBottomWrapper()\r\n            : null}\r\n        <FlatList ref={this.props.forwardRef} extraData={[this.props.extraData, this.props.isTyping]} keyExtractor={this.keyExtractor} enableEmptySections automaticallyAdjustContentInsets={false} inverted={inverted} data={this.props.messages} style={styles.listStyle} contentContainerStyle={styles.contentContainerStyle} renderItem={this.renderRow} {...this.props.invertibleScrollViewProps} ListEmptyComponent={this.renderChatEmpty} ListFooterComponent={inverted ? this.renderHeaderWrapper : this.renderFooter} ListHeaderComponent={inverted ? this.renderFooter : this.renderHeaderWrapper} onScroll={this.handleOnScroll} scrollEventThrottle={100} onLayout={this.onLayoutList} onEndReached={this.onEndReached} onEndReachedThreshold={0.1} {...this.props.listViewProps}/>\r\n      </View>);\r\n    }\r\n}\r\nMessageContainer.defaultProps = {\r\n    messages: [],\r\n    user: {},\r\n    isTyping: false,\r\n    renderChatEmpty: null,\r\n    renderFooter: null,\r\n    renderMessage: null,\r\n    onLoadEarlier: () => { },\r\n    onQuickReply: () => { },\r\n    inverted: true,\r\n    loadEarlier: false,\r\n    listViewProps: {},\r\n    invertibleScrollViewProps: {},\r\n    extraData: null,\r\n    scrollToBottom: false,\r\n    scrollToBottomOffset: 200,\r\n    alignTop: false,\r\n    scrollToBottomStyle: {},\r\n    infiniteScroll: false,\r\n    isLoadingEarlier: false,\r\n};\r\nMessageContainer.propTypes = {\r\n    messages: PropTypes.arrayOf(PropTypes.object),\r\n    isTyping: PropTypes.bool,\r\n    user: PropTypes.object,\r\n    renderChatEmpty: PropTypes.func,\r\n    renderFooter: PropTypes.func,\r\n    renderMessage: PropTypes.func,\r\n    renderLoadEarlier: PropTypes.func,\r\n    onLoadEarlier: PropTypes.func,\r\n    listViewProps: PropTypes.object,\r\n    inverted: PropTypes.bool,\r\n    loadEarlier: PropTypes.bool,\r\n    invertibleScrollViewProps: PropTypes.object,\r\n    extraData: PropTypes.array,\r\n    scrollToBottom: PropTypes.bool,\r\n    scrollToBottomOffset: PropTypes.number,\r\n    scrollToBottomComponent: PropTypes.func,\r\n    alignTop: PropTypes.bool,\r\n    scrollToBottomStyle: StylePropType,\r\n    infiniteScroll: PropTypes.bool,\r\n};\r\n//# sourceMappingURL=MessageContainer.js.map"]},"metadata":{},"sourceType":"module"}